//
//  Test_Regression.cpp
//  ePPDSC
//
//  Created by Qifan Wang on 25/12/21.
//

#include <iostream>
#include <stdio.h>
#include <fstream>
#include <sys/time.h>
#include <chrono>
#include <NTL/BasicThreadPool.h>

#include "Regression.h"

int main(int argc, const char * argv[]) {
    SetNumThreads(16);
    
    auto start= std::chrono::steady_clock::now();
    LRparams param(/*m =*/17507,
                      /*p =*/127,
                      /*r =*/1,
                      /*bits =*/350,
                      /*c=*/2,
                      /*gens =*/std::vector<long>{9395, 2502, 12629},
                      /*ords =*/std::vector<long>{40, 6, -2},
                      /*mvec =*/std::vector<long>{41, 7, 61});


    LRmeta meta;
    meta(param);
    meta.data->context.printout();

    auto end = std::chrono::steady_clock::now();
    auto diff = end - start;
    double timeElapsed = chrono::duration <double, milli> (diff).count()/1000.0;

    cout << "------------------------------------------------------------------------" << endl;
    cout << "Total HE Training Time = " << timeElapsed << " s" << endl;
    cout << "------------------------------------------------------------------------" << endl;

    return 0;
}
